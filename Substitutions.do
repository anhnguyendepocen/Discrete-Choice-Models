*** Clogit***************capture program drop myclogitprogram define myclogit	args todo b lnf  	tempvar xb denom p	mleval `xb' = `b'	egen double `denom' = total(exp(`xb')), by(i)	quietly {	gen double `p' = exp(`xb')/`denom'	mlsum `lnf' = ln(`p') if $ML_y1 == 1	} end use data.dta, clearml model d0 myclogit (y = time cost, noconstant)ml searchml max** canned clogit & asclogitclogit y time cost, group(i) asclogit y time cost, case(i) alt(j) noconsgen betatime = _b[time]gen betacost = _b[cost]collapse cost time betatime betacost, by(j)gen num = exp(cost*betacost + time*betatime)egen den = sum(num)gen prob = num/dengen ptrain = prob if j == 2egen probtrain = sum(ptrain)gen change = -betatime*prob*probtrain*50gen pair = prob if j == 1egen probair = sum(pair)gen pbus = prob if j == 3egen probbus = sum(pbus)gen groupprob = probtrain + probbus + probairgen cptrain = probtrain/groupprobgen sig = .25 gen change2 = ((sig)*cptrain + (1-sig)*(probtrain))*(-betatime/(1-sig))*prob*50replace change2 = -betatime*probtrain*prob*50 if j==4replace sig =.75gen change3 = ((sig)*cptrain + (1-sig)*(probtrain))*(-betatime/(1-sig))*prob*50replace change3 = -betatime*probtrain*prob*50 if j==4drop if j == 2mkmat change change2 change3, matrix(A)matrix rownames A = Airplane Bus Carmatrix colnames A = CLogit .25 .75outtable using logittable, mat(A) nobox caption ("Estimated Change in P from a 50 minute increase in Train Travel") replace